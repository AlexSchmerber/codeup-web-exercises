<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Geocode Examples</title>
    <!-- Mapbox CSS -->
    <link href='https://api.mapbox.com/mapbox-gl-js/v2.12.0/mapbox-gl.css' rel='stylesheet' />
    <!-- Custom CSS -->
    <style>
        #map {
            /* the width and height may be set to any size */
            width: 100%;
            height: 600px;
        }
    </style>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
</head>
<body>

<h1>My First Mapbox Map!</h1>

<!-- The HTML element that serves as the Mapbox container -->
<container style="width: 90%;" class="d-flex mx-auto">
    <div id='map'></div>
</container>

<!-- Mapbox JS -->
<script src='https://api.mapbox.com/mapbox-gl-js/v2.12.0/mapbox-gl.js'></script>

<script src="js/keys.js"></script>
<!-- Mapbox Geocoder Util Methods -->
<script src="js/mapbox-geocoder-utils.js"></script>

<!-- Custom JS -->
<script>
    mapboxgl.accessToken = MAPBOX_API_KEY;
    let map = new mapboxgl.Map({
        container: 'map',
        style: 'mapbox://styles/mapbox/streets-v9',
        zoom: 10,
        center: [-98.4916, 29.4252]
    });

    // the  geocode method from mapbox-geocoder-utils.js


    //alamo
    // let marker = new mapboxgl.Marker().setLngLat([-98.4946, 29.4252]).addTo(map);

    //find out where North Star mall is and make a marker popup for it

    let myFavoriteRestaurants = [
        {
            name:'Mr Gattis',
            description: 'A delightful pizza paradise full of nostalgia and entertainment for all (Zaaaaa)'
        },{
        name:'La Fogata',
        description: 'If Tex-Mex is your thing, La Fogata is also your thing (Grade A fajitas)'
        },{
        name: 'Botika',
        description: 'Sushi and other Asian styled foods that will tantalize your tastebuds'
        }
    ]

    myFavoriteRestaurants.forEach(function (restaurant) {
        geocode(restaurant.name, MAPBOX_API_KEY)
            .then(function(result) {
                const marker = new mapboxgl
                    .Marker();
                marker.setLngLat(result);
                marker.addTo(map);
                let popup = new mapboxgl.Popup();
                popup.setHTML(`<h3>${restaurant.name}</h3><p>${restaurant.description}</p>`);
                marker.setPopup(popup);
                // map.setCenter(result);
                // map.setZoom(20);
            }).catch(function(error) {
            console.log("Boom");
        });
    });

    // myFavoriteRestaurants.forEach(function (restaurant) {
    // function pinThatAddress(address) {
    //     geocode(address, MAPBOX_API_KEY)
    //         .then(function(result) {
    //         const marker = new mapboxgl
    //             .Marker();
    //         marker.setLngLat(result);
    //         marker.addTo(map);
    //         let popup = new mapboxgl.Popup();
    //         popup.setHTML(`<h1>${address}</h1>`);
    //             marker.setPopup(popup);
    //         // map.setCenter(result);
    //         // map.setZoom(20);
    //     }).catch(function(error) {
    //         console.log("Boom");
    //     });
    // }

        // function pinThatAddress(address) {
        //     geocode(address, MAPBOX_API_KEY)
        //         .then(function (result) {
        //             const marker = new mapboxgl
        //                 .Marker();
        //             marker.setLngLat(result);
        //             marker.addTo(map);
        //             let popup = new mapboxgl.Popup();
        //             popup.setHTML(`<h1>${address}</h1>`);
        //             marker.setPopup(popup);
        //             // map.setCenter(result);
        //             // map.setZoom(20);
        //         }).catch(function (error) {
        //         console.log("Boom");
        //     });
        // }



    // ^ catch logs message if error pinning address
    // pinThatAddress('Botika');
    // pinThatAddress('');
    // pinThatAddress('afafgrv');
    //north star

    // popup


    // logs Name of place from cords
    // reverseGeocode({lng:-98.393114, lat: 29.507893}, MAPBOX_API_KEY).then(function (results) {
    //     console.log(results);
    // });

</script>
</body>
</html>